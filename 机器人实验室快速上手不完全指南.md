# 机器人实验室快速上手不完全指南

```json
{
  "version": 0.3,
  "date": 20220914,
  "author": "所有师兄师姐 with ♥"
}
```

## 如何阅读此文档

这是一个 [markdown](https://zh.wikipedia.org/zh-hans/Markdown) 文件  
可以从这里找到关于如何优雅的阅读此文件的 [保姆式教
程](https://zhuanlan.zhihu.com/p/56943330)

## 文档如何组织

由于我们主要的工作是用代码实现各种算法，所以文档组织的中心围绕，下面几个方面展开

1. 最近几个月可以做的事情，后面东西比较多怕你们作不过来
2. 如何写代码（关于写代码的东西）
3. 写什么代码（关于算法、论文、想法）

## 1. 最近几个月的重点

- 安装 Ubuntu20.04 （在这个系统下活下来，且能正常工作）  
- 安装 ROS noetic （跟着下面提到的教程走完全程，熟悉各种概念，顺便回忆起多年不用
  的 c++/python）  
  不需要安装 ROS2，在搞明白下面那条之前都不要尝试安装（主要概念有脚本、环境变
  量、source、./）
- 熟悉 Ubuntu 下命令行操作（资源写下面了，仔细找找）  
  比如命令行创建删除文件、文件夹啥的，切换目录，打印文件夹内容移动、删除、重命名
  文件等
- 安装自己喜欢的代码编辑器，并搞清楚怎么发挥它的功能  
  如果你选择 vscode，遇到配置问题可以找师兄们问问，这个编辑器在教研室很流行，而
  且它能把很多 “代码之下” 的东西整合起来，有些比较常用的还能提供一套可视化界面给
  你用
- 熟悉 cpp  
  资源在下面可以连带着上面的命令行操作一起熟悉在命令行下编译你的源代码并执行起来

## 如何写代码 （代码相关）

“代码之上” 用来指导你如何写代码，因为我们要实现的目标都比较复杂，所以对于写代码
的思路和组织代码的能力都有一定要求，这块主要是提供这部分的资料

“代码本身” 讲的写代码这件事，虽然代码只是工具，但是这个工具的功能比较多，需要专
门练习才能用明白

“代码之下” 指的是支撑你写代码的知识，这部分东西比较杂，比如编译流程那一套知
识，Linux用法，ROS 相关的概念和工具，还有大量的数学知识

### 代码本身

因为我们主要用 cpp，所以这里集中讨论其相关的东西，有其他需求的同学可照葫芦画瓢自
己找相关的资料，不难找

- cpp 基础 《C++ Primer》  
  看明白类相关的概念，知道多态、虚函数相关的东西就可以，后面忘了可以回来接着看当
  工具书也没问题，用啥查啥

  - [菜鸟教程](https://www.runoob.com/cplusplus/cpp-tutorial.html)看这个也行，最
    起码看完基础和面向对象的部分

- cpp 新标准

  - [《现代 c++》](https://changkun.de/modern-cpp/zh-cn/00-preface/)

  - [《C++ 核心指南》](./资料/Cpp核心指南/C++%20核心指导方针.pdf)

- cpp 标准库速查

  - [cppreference](https://en.cppreference.com/w/)

  - [cplusplus](http://www.cplusplus.com/)  
    这个尽量少看，虽然写的比较明白，但有的地方有错误，上面的实在看不懂，  
    中文网站也找不到合适的可以来这里看看，大概明白后回去上面的接着看

知道这些差不都就可以写个差不多的代码了，但此时写出来的代码不管是健壮性还是可读性
都不一定够高，需要多看看别人的代码学一学怎么写得更清晰易懂

### 代码之下

- ROS机器人操作系统，本教研室目前大部分工作的基础，希望搞清楚师兄师姐们在干啥，
  一定要熟悉这个东西  
  目前正处在 ROS1 向 ROS2 过渡的阶段，建议先看 ROS1 方便熟悉现有的项目，然后熟悉
  ROS2 后面  
  我们写的东西要逐步迁移到 ROS2 下

  - [官方网站](https://www.ros.org/)  
  包含大量教程，跟着做一遍熟悉一下各种概念

  - [古月居 ROS 教程](https://www.guyuehome.com/)
  B 站也有相关的视频，私以为还是上面的英文版来得干脆利落

- 《深入理解计算机操作系统》  
  对操作系统的整体认识，不需要特别仔细的看，走马观花就行，知道 ascii 是怎么变成
  二进制，二进制又是怎么执行的，知道网络那些参数到底是什么意思

- [cmake-examples](https://github.com/pr0g/cmake-examples)  
  虽然有很多新冒出来的构建系统，但 cmake 仍然是我们最常用的，而且也是 ros 官方推
  荐的，多少应该明白点。教程里的东西不用全看明白，知道什么叫 target 怎么添加属性
  和文件，怎么链接就可以后续有自己写库的需要可以回来看怎么写库在工作中你们会见很
  多老版本 cmake 的写法，理解即可，不要跟着学，那是被淘汰的东西

- linux（Ubuntu） ubuntu 是 linux 众多的发行版之一，关于 linux 的东西可谓是汗牛
  充栋，随便在哪里都能找到一堆，稍微有个认识就好

  - [linux 目录结构](https://linuxhandbook.com/linux-directory-structure/)  
  知道那些文件夹的作用才能明白很多系统命令的原理。这地方的东西太多了，看一点基础
  的然后开始碰壁就好了遇到困难就去查一查。

  - [linux 命令行](http://billie66.github.io/TLCL/book/)  
  大量的脚本，构建命令其实都是命令行下各种指令的组合，看明白相关的东西可以从根
  源上解决很多问题，不要让人家写的脚本成为对你 “黑魔法” 一般的存在，那样就太糟
  糕了，这个都看完，然后自己实践一下
- [编译相
  关](https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work)  
  估计在上面 cpp 入门的时候已经看明白了，但还是单独提一下，因为我们工作需要用大
  量的第三方库，这会导致一些编译链接上的问题，一定要自己弄明白，不然没办法做事情

- 数学部分
  - 线性代数这块主要是看教材，[这个人](https://space.bilibili.com/88461692/)的视
    频也不错

  - [优化原理](./资料/最优化方法.pdf)  
  我们很多问题其实都是优化问题，很多工作都是把数据转换成适合优化的样子，很多公式
  推导都是再求残差的雅各比矩阵或者构造残差，所以优化方法一定要明白

  - [概率机器人](./资料/ProbabilisticRobotics.pdf)  
  虽然这些已经是老技术了，但各种滤波算法作为中间件在各个模块之前过滤信号、融合信
  号都非常常见，还是有必要了解一下

  - [机器人的位姿表示与刚体变换](./资料/位姿表示_刚体变换)  
    数学上表示位姿（位置+姿态）存在很多反常识的东西，尤其是讲李代数的论文，优化
    位姿时很多论文都采用这块的方法来做，如果不理解会非常麻烦

### 代码之上

- 设计模式关于这东西的讨论非常多，我对他的态度可以概括为 “一个工具”，意思是设计
  过程中在有需要的时候才使用，而不是为了使用设计模式强行将本来逻辑通顺的结构改造
  成符合设计模式的样子
  - [🎉 Design patterns for humans 中文
    版](https://www.guanguans.cn/design-patterns-for-humans-cn/)
  - [Refactoring.Guru](https://refactoringguru.cn/)

- 下面是一些开源项目，这些项目不仅与咱们组正在做的事情强相关，代码风格也不错。下
  面的代码仓库我都尽量给的是原作者，除非代码需要手动适配新系统，如果实在看不懂，
  也可以试着在 github 上找到注释版，这个也非常多

  - [A-LOAM](https://github.com/HopeCollector/A-LOAM)  
  根据 LOAM 原始代码改的，代码更整洁，而且有一些注释，我把这套代码在 Ubuntu20.04
  下做了适配，拿到代码可以看看我做了那些修改，以及为什么要进行这些修改，能对 “代
  码之下” 相关的知识有更多的理解。多提一句，LOAM 算是基于优化的激光 SLAM 非常基
  础的论文了，现在流行框架，大多有它的影子

  - [FAST-LIO](https://github.com/hku-mars/FAST_LIO)  
  2022 年新出的一套激光 SLAM 框架，实时性比较强，论文、代码都还可以，可以拿来练
  练手，之后组内的项目可能会用到它，熟悉一下也挺好

  - [LIO-SAM](https://github.com/TixiaoShan/LIO-SAM)  
  一个基于图优化方法的多传感器融合 SLAM，代码量不大，比较适合入门，就是数学方面
  需要下点功夫

  - [PointNet](https://github.com/charlesq34/pointnet)  
  一个经典的点云识别网络，组内也有做点云方面的深度学习，入门的话看看这个也挺好

## 学术相关

### 资源管理与获取

主要是一些指导学术研究方向和方便管理资源的东西

- 常用的论文库
  - web of science
  - ieee
  - 跟老师说话（这个效率最高，但头几次容易紧张）
- Zotero （文献管理工具，靠自己保管相关数据库，不容易被窃取信息）
- 坚果云（网盘工具，提供多端文件同步服务，有点贵，用来保护重要文件很方便）
- 教研室服务器（具体问王程民，新生入学会给分配账号）

### 教研室研究现状

整理了历届师兄师姐的研究内容，越靠上部分的研究内容越新，越容易找到正在研究这些内
容的师兄师姐靠下面部分的师兄师姐很可能已经毕业，项目处在无人维护的状态

下面列出的论文或者网页有参考文献，有自己写的。有的直接拿到了论文，有的只有个题
目，都不难找

#### 路径规划

由劳孟潇负责

阿克曼运动模型的安保机器人平台搭建，利用 CAD 软件设计安保机器人平台，负责传感器
安置、走线与供电等；基于 LCM 协议编写底盘控制与二维激光避停程序，实现键盘与手柄
遥控安全遥控；基于已标定的 ouster 激光与相机进行行人检测，在 NVDIA Xavier 平台上
通过 yolo 实现行人检测，在 NUC 平台上通过欧氏聚类和主成成分分析并通过 Apollo 开
源的匈牙利比配算法和卡尔曼滤波算法实现障碍物的检测框选与跟踪。设置 ROS 双机通讯
进行检测信息融合，实现行人的跟踪检测；利用行人历史的观测值信息，在考虑目标动态约
束的情况下通过贝塞尔曲线拟合预测目标行人的未来运动轨迹；基于三维激光，结合路沿特
征，提取路沿点云，通过 RANSAC 算法进行拟合，实现实时路沿提取；基于 Dijkstra 算法
对拓扑地图进行路径规划，通过 B 样条平滑路径，实现全局路径规划。基于全局路径规划
的结果，通过对道路采样并配合障碍物检测结果对轨迹进行评价，选取最优轨迹进行局部路
径规划，实现动态避障；通过纯跟踪算法对实现轨迹跟踪控制。

[论文-1](./研究现状/123.pdf)  
[论文-2](./研究现状/基于四阶贝塞尔曲线的无人车可行轨迹规划.pdf)

#### 点云超分辨率算法

由谭清阳负责

通过深度学习的方法实现稀疏点云的稠密化。以下是具体流程：首先，将三维点云映射为二
维深度图像；然后，借鉴图像的超分辨率重建技术，在深度图像上实现像素的稠密化；最
后，将稠密重建后的图像映射回三维点云。现阶段的实验内容是实现 16 线激光雷达数据增
稠为 64 线激光雷达数据。

[论文-1](./研究现状/2004.05242.pdf)

#### 基于几何语义联合的实例级语义地图构建

由孙国毅负责

用深度 RGB 相机获取环境的深度图像和 RGB 图像，对深度图像进行几何分割，对 RGB 图
像进行实例分割，并将分割结果进行融合，并通过数据关联对不同图像帧中的物体实例进行
跟踪和匹配，从而构建实例级的全局语义地图

论文: Volumetricinstance-awaresemanticmappingand3Dobjectdiscovery

#### lio-sam 紧耦合 SLAM

由袁志强负责

论文代码直接搜索 lio-mapping 就好

#### 基于红外图像和点云融合的语义分割

由黄响潮负责

利用轻量级的卷积神经网络，实现了点云中三维物体的实时语义、实例分割。将三维点云映
射为二维深度图像，与红外相机获得的红外图像进行融合，对融合后的图像进行处理，最后
映射到三维点云。

论文: SqueezeSeg: Convolutional Neural Nets with Recurrent CRF for Real-Time
Road-Object Segmentation from 3D LiDAR Point Cloud

#### 激光雷达语义建图

由张钦汉负责

用语义和激光点云完成建图优化任务，通过将语义实例化映射至地图建立共视约束，从而增
强闭环约束，丰富地图结构。现阶段实验内容，构建语义的约束项目并参与位姿优化过程。

论文PSF-LO Parameterized Semantic Features Based Lidar Odometry Factor Graph
based 3D Multi-Object Tracking in Point Clouds

#### 旋转激光雷达

主要由王程民负责，目的是用是一个旋转的二维激光模拟三维激光的功能  
因此三维激光有的 SLAM 算法是要进行大幅度调整才好用的，具体细节非常讨厌

- [电机相关的东西](./研究现状/旋转激光雷达/motorSrc)  
  这东西涉及到一些串口通信的东西，建议先搞清楚 rs232、rs485、uart、usb 这些都是
  啥，有啥关系

- [旋转激光雷达的驱动](./研究现状/旋转激光雷达/lidar_driver)  
  从这个驱动里出来的数据都是正经的三维点云，需要点坐标系变换的知识才好用

#### 激光雷达点云障碍物检测

主要由赵子文负责

- [激光雷达点云障碍物检测](https://blog.csdn.net/qinlele1994/article/details/106259965)

#### 无人机三维重建

主要由王玉茜负责

- [论文 1-无人机三维重建](https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=8202315)

- [论文 2-基于上一篇的骨架图](https://ieeexplore.ieee.org/document/8594152)

#### 激光惯导标定

主要由曾祥威负责

- [代码](https://github.com/zeng-xiangwei/lidar_IMU_calib)

- [论文](./研究现状/Targetless%20Calibration%20of%20LiDAR-IMU%20System%20Based%20on%20Continuous-time%20Batch%20Estimation.pdf)

#### 二维机器人驱动相关

主要由王嘉伟负责

- [博客，记得点关注](https://blog.csdn.net/qq_34754836/article/details/110910511)